<!DOCTYPE html>
<html>
    <head>
        <title>Pool Shark</title>

        <script src="/static/jspsych-6.3.1/jspsych.js"></script>
        <script src="/static/jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="/static/jspsych-6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
        <script src="/static/jspsych-6.3.1/plugins/jspsych-video-slider-response.js"></script>
        <script src="/static/jspsych-6.3.1/plugins/jspsych-preload.js"></script>
        <script src="/static/stimuli_order.js" id="stim_order" type="text/javascript"></script>
        <script src="/static/jspsych-6.3.1/jquery-min.js" ></script>
        <link href="/static/jspsych-6.3.1/fonts/">
        <link href="/static/jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">
    </head>
    <body>
    </body>

    <script>
        var timeline = [];

        var preload = {
            type: 'preload',
            auto_preload: true
        }

        var welcome = {
            type: 'html-keyboard-response',
            stimulus: "Welcome to the experiment. Press any key to begin."
        }

        var thanks = {
            type: 'html-keyboard-response',
            stimulus: "You have finished this experiment! Thank you for participating.<br>Press any key. "
        }

        var instructions = {
            type: 'html-keyboard-response',
            stimulus: '<span style="font-size: x-large;">' +
                "<p>In this experiment, You'll make judgements about a series of billiard ball events, and possible " +
                "alternative events.</p><p> Make your judgement based on the videos displayed by using a slider bar to " +
                "indicate your agreement with the statements on the screen.</p></span>" +
                "<div class='row' style='display: inline-flex;'>" +
                "<div><img src='static/img/ballAimage.png' style='width:350px;'><p class='small'><strong>Ball A</strong></p></div>" +
                "<div><img src='static/img/exampletrial.png' style='width:600px;border-style: double;'><p class='small'><strong>Example</strong></p></div>" +
                "<div><img src='static/img/BallBimage.png' style='width: 350px;'><p class='small'><strong>Ball B</strong></p></div>" +
                "</div><div><br><br><p style='font-size: x-large;'>Press any key to begin.</p></div>" +'',
            post_trial_gap: 1000
        };

        var test_trial  = {
            type: 'video-slider-response',
            stimulus: jsPsych.timelineVariable('stimulus'),
            labels: ['Totally Disagree', 'Totally Agree'],
            min: 1,
            max: 100,
            step: 1,
            slider_start: 50,
            prompt: jsPsych.timelineVariable('prompts'),
            require_movement: true,
            autoplay: true,
            rate: 1.5,
            width: 780,
            response_ends_trial: true,
            controls: true,
        }

        var test_stimuli = Stim_order

        var fixation = {
            type: 'html-keyboard-response',
            stimulus: '<div style="font-size:60px;"> + </div>',
            choices: jsPsych.NO_KEYS,
            trial_duration: function(){return jsPsych.randomization.sampleWithoutReplacement([250, 500, 750, 1000, 1250,
                1500, 1750, 2000], 1)[0]},
            data:{task:'fixation'}
        }

        var test_procedure = {
            timeline: [fixation, test_trial],
            timeline_variables: test_stimuli,
            randomize_order: true
        }

        jsPsych.data.addProperties({
          subject: jsPsych.randomization.randomID(15)
        });

        timeline.push(preload, welcome, instructions, test_procedure, thanks)


        jsPsych.init({
            timeline:timeline,
            show_progress_bar: true,
            on_finish: function(){
                jsPsych.data.displayData();
                },
            override_safe_mode: true
        })

    </script>


</html>